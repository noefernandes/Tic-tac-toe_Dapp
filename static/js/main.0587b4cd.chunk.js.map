{"version":3,"sources":["abi.js","index.js"],"names":["abi","utils","require","Square","props","className","onClick","value","Board","i","this","squares","renderSquare","React","Component","Game","sleep","milliseconds","Promise","resolve","setTimeout","state","Array","fill","web3","account","contracts","username","lastPlayer","bet","totalBet","gameState","disabled","handleSubmit","bind","payWinner","init","lookupInterval","setInterval","mostrarTabuleiro","verificarVitoria","atualizarQuadro","clearInterval","a","window","ethereum","request","method","accounts","setState","on","eth","getAccounts","location","reload","console","error","Web3","initContract","Jogo","getPastEvents","fromBlock","toBlock","then","result","name","currentAddress","getAddress","currentProvider","selectedAddress","length","returnValues","end","nome","toString","usernameDisplay","newContracts","Contract","methods","call","string_squares","mostrarPremioTotal","mostrarUltimoJogador","verifyPagamento","fazerJogada","send","from","e","preventDefault","betValue","parseInt","pagarJogo","pagarOVencedor","handleClick","onSubmit","type","onChange","target","style","backgroundColor","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0587b4cd.chunk.js","sourcesContent":["const abi = [\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"constructor\"\r\n\t},\r\n\t{\r\n\t\t\"anonymous\": false,\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"indexed\": false,\r\n\t\t\t\t\"internalType\": \"string\",\r\n\t\t\t\t\"name\": \"nome\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"indexed\": false,\r\n\t\t\t\t\"internalType\": \"address\",\r\n\t\t\t\t\"name\": \"end\",\r\n\t\t\t\t\"type\": \"address\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"indexed\": false,\r\n\t\t\t\t\"internalType\": \"bool\",\r\n\t\t\t\t\"name\": \"status\",\r\n\t\t\t\t\"type\": \"bool\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"Pagamento\",\r\n\t\t\"type\": \"event\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"destroy\",\r\n\t\t\"outputs\": [],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"string\",\r\n\t\t\t\t\"name\": \"_nomeJogador\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"pos\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"fazerJogada\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"string\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"nonpayable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"mostrarPremioTotal\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"uint256\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"mostrarTabuleiro\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"uint256[9]\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"uint256[9]\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"mostrarUltimoJogador\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"string\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"string\",\r\n\t\t\t\t\"name\": \"_nomeJogador\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"pagarJogo\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"string\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"payable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"string\",\r\n\t\t\t\t\"name\": \"_nomeJogador\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"name\": \"pagarOVencedor\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"string\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"payable\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"verificarVitoria\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"string\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"string\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t},\r\n\t{\r\n\t\t\"inputs\": [],\r\n\t\t\"name\": \"verifyPagamento\",\r\n\t\t\"outputs\": [\r\n\t\t\t{\r\n\t\t\t\t\"internalType\": \"bool\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"type\": \"bool\"\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"stateMutability\": \"view\",\r\n\t\t\"type\": \"function\"\r\n\t}\r\n]\r\n\r\nexport default abi;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport Web3 from 'web3';\r\nimport abi from './abi';\r\n\r\n\r\nconst { utils } = require('ethers');\r\nconst contractAddress = \"0x142e307Ddcf94AB4DCd28c01cD7D8258f9Fa72aB\";\r\n\r\nfunction Square(props) {\r\n    return (\r\n        <button className=\"square\" onClick={props.onClick}>\r\n          {props.value}\r\n        </button>\r\n    );\r\n}\r\n  \r\nclass Board extends React.Component {\r\n    renderSquare(i) {\r\n        return <Square\r\n            value = {this.props.squares[i]}\r\n            onClick={() => this.props.onClick(i)} \r\n        />;\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n        <div>\r\n            <div className=\"board-row\">\r\n                {this.renderSquare(0)}\r\n                {this.renderSquare(1)}\r\n                {this.renderSquare(2)}\r\n            </div>\r\n            <div className=\"board-row\">\r\n                {this.renderSquare(3)}\r\n                {this.renderSquare(4)}\r\n                {this.renderSquare(5)}\r\n            </div>\r\n            <div className=\"board-row\">\r\n                {this.renderSquare(6)}\r\n                {this.renderSquare(7)}\r\n                {this.renderSquare(8)}\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n    \r\n}\r\n  \r\nclass Game extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            squares: Array(9).fill(null),\r\n            web3: null,\r\n            account: null,\r\n            contracts: {},\r\n            username: \"\",\r\n            lastPlayer: \"\",\r\n            bet: \"\",\r\n            totalBet: \"\",\r\n            gameState: \"\",\r\n            disabled: true\r\n        };\r\n\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.payWinner = this.payWinner.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.init();\r\n\r\n        this.lookupInterval = setInterval(() => {\r\n        \r\n            this.mostrarTabuleiro();\r\n            this.verificarVitoria();\r\n            this.atualizarQuadro();\r\n\r\n         }, 500)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.lookupInterval)\r\n    }\r\n\r\n    async init() {\r\n        if (typeof window.ethereum !== \"undefined\") {\r\n            try {\r\n              const accounts = await window.ethereum.request({ // Requisita primeiro acesso ao Metamask\r\n                method: \"eth_requestAccounts\",\r\n              });\r\n              \r\n              this.setState({ account: accounts[0] });\r\n              \r\n              window.ethereum.on('accountsChanged', () => {\r\n                this.setState({ account: (this.state.web3.eth.getAccounts())[0] });\r\n                window.location.reload(false);\r\n              });\r\n\r\n            } catch (error) {\r\n              console.error(\"Usuário negou acesso ao web3!\");\r\n              return;\r\n            }\r\n            this.setState({ web3: new Web3(window.ethereum) });\r\n        } else {\r\n            console.error(\"Instalar MetaMask!\");\r\n            return;\r\n        }\r\n\r\n        this.initContract();\r\n\r\n        this.state.contracts.Jogo.getPastEvents(\"Pagamento\", { fromBlock: 0, toBlock: 'latest' }).then((result) => {\r\n            var name = \"\";\r\n            var currentAddress = utils.getAddress(this.state.web3.currentProvider.selectedAddress);\r\n            \r\n            if(result.length > 1){\r\n\r\n                if(result[result.length-2].returnValues.end === currentAddress){\r\n                    //var address = result['0'].returnValues.end;\r\n                    //var status = result['0'].returnValues.status;\r\n                    name = result[result.length-2].returnValues.nome;\r\n                }else if(result[result.length-1].returnValues.end === currentAddress){\r\n                    //var address = result['1'].returnValues.end;\r\n                    //var status = result['1'].returnValues.status;\r\n                    name = result[result.length-1].returnValues.nome;\r\n                }\r\n            }\r\n            \r\n            this.setState({ username: name.toString(), usernameDisplay: name.toString() });\r\n        });\r\n\r\n        this.mostrarTabuleiro();\r\n    }\r\n\r\n    // Associa ao endereço do seu contrato\r\n    async initContract () {\r\n        var newContracts = {...this.state.contracts};\r\n        newContracts.Jogo = new this.state.web3.eth.Contract(abi, contractAddress);\r\n        this.setState({ contracts: newContracts });\r\n    }\r\n\r\n    //Atualizando tabuleiro\r\n    mostrarTabuleiro(){\r\n        this.state.contracts.Jogo.methods.mostrarTabuleiro().call().then( result => {\r\n            var string_squares = [9];\r\n\r\n            for(var i = 0; i < 9; i++){\r\n                if(result[i] === '0'){\r\n                    string_squares[i] = ' ';\r\n                }else if(result[i] === '1'){\r\n                    string_squares[i] = 'X';\r\n                }else if(result[i] === '2'){\r\n                    string_squares[i] = 'O';\r\n                }else{\r\n                    string_squares[i] = 'e';\r\n                }\r\n            }\r\n            this.setState({ squares: string_squares })\r\n        });\r\n    }\r\n\r\n    verificarVitoria(){\r\n        this.state.contracts.Jogo.methods.verificarVitoria().call().then( result => {\r\n\r\n            if(result === this.state.username){\r\n                this.setState({ gameState: result, disabled: false });\r\n                //console.log(this.state.disabled);\r\n            }else if(result === \"O jogo ainda nao acabou\"){\r\n                this.setState({ gameState: result });\r\n            }else{\r\n                this.setState({ gameState: result });\r\n            }\r\n        });\r\n    }\r\n\r\n    atualizarQuadro(){\r\n        this.state.contracts.Jogo.methods.mostrarPremioTotal().call().then( result => {\r\n            this.setState({ totalBet: result})\r\n        });\r\n\r\n        this.state.contracts.Jogo.methods.mostrarUltimoJogador().call().then( result => {\r\n            this.setState({ lastPlayer: result})\r\n        });\r\n    }\r\n\r\n    sleep = (milliseconds) => {\r\n        return new Promise(resolve => setTimeout(resolve, milliseconds))\r\n    }\r\n          \r\n\r\n    async handleClick(i) {        \r\n\r\n        this.state.contracts.Jogo.methods.verifyPagamento().call().then( result => {\r\n            if(result){\r\n                this.state.contracts.Jogo.methods.fazerJogada(this.state.username, i)\r\n                .send({ from: this.state.account }).then( result => {\r\n            \r\n                    this.state.contracts.Jogo.methods.mostrarTabuleiro().call().then(result => {\r\n                    });\r\n                });\r\n            }\r\n        });\r\n\r\n        this.mostrarTabuleiro();\r\n\r\n    }\r\n\r\n\r\n    handleSubmit(e){\r\n        e.preventDefault();\r\n        const betValue = parseInt(this.state.bet)*100000000000000000;\r\n        this.state.contracts.Jogo.methods.pagarJogo(this.state.username)\r\n            .send({from: this.state.account, value: betValue}).then(result => {\r\n            });\r\n    }\r\n\r\n    payWinner(e){\r\n        e.preventDefault();\r\n\r\n        this.state.contracts.Jogo.methods.verificarVitoria().call().then( result => {\r\n\r\n            if(result === this.state.username){\r\n                this.setState({ gameState: result, disabled: false });\r\n                //console.log(this.state.disabled);\r\n            }else if(result === \"O jogo ainda nao acabou\"){\r\n                this.setState({ gameState: result });\r\n            }else{\r\n                this.setState({ gameState: result });\r\n            }\r\n        });\r\n        \r\n\r\n\r\n        if(this.state.username === this.state.gameState){\r\n\r\n            this.state.contracts.Jogo.methods.pagarOVencedor(this.state.gameState)\r\n                .send({from: this.state.account}).then(result => {\r\n                });\r\n        }\r\n    }\r\n    \r\n    render() {\r\n\r\n        return (\r\n        <div>\r\n            <div className=\"header\">Jogo da Velha</div>\r\n            <div className=\"game\">\r\n                <div className=\"game-board\">\r\n                    <Board \r\n                        squares = {this.state.squares}\r\n                        onClick={i => this.handleClick(i)}\r\n                    />\r\n                </div>\r\n                <div className='game-info'>\r\n                    <form onSubmit={this.handleSubmit}>\r\n                        <label>\r\n                            <strong>\r\n                            Nome:\r\n                            </strong>\r\n                        </label>\r\n                        <input type=\"text\" \r\n                               onChange={e => {this.setState({ username: e.target.value })}} />\r\n                        \r\n                        <label>\r\n                            <strong>\r\n                            Valor de aposta:\r\n                            </strong>\r\n                        </label>\r\n                        <input type=\"text\" \r\n                               onChange={e => {this.setState({ bet: e.target.value })}} />\r\n\r\n                        <button type=\"submit\" className=\"button\">Inscrever usuário</button>\r\n                    </form>\r\n                    <form onSubmit={this.payWinner}>\r\n                        <h2>Jogador: {this.state.username}</h2>\r\n                        <h2>Ultimo a jogar: {this.state.lastPlayer}</h2>\r\n                        <h2>Prêmio total: {this.state.totalBet/1000000000000000000} ether</h2>\r\n                        <h2>Resultado: {this.state.gameState} </h2>\r\n                        <button type=\"submit\" disabled={this.state.disabled} \r\n                                style={{backgroundColor: this.state.disabled ? '#CCC' : '#4CAF50' }} \r\n                                className=\"button\">Resgatar prêmio</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n}\r\n\r\n// ========================================\r\n\r\nReactDOM.render(\r\n    <Game />,\r\n    document.getElementById('root')\r\n);\r\n  "],"sourceRoot":""}